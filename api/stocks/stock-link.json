{
  "id": "stock-link",
  "title": "증권계좌 연동",
  "description": "증권사 로그인 정보로 계좌를 연동하고 보유종목을 DB에 저장합니다. CODEF API를 통해 실제 금융기관과 연결됩니다.",
  "method": "POST",
  "endpoint": "/api/stock/link",
  "headers": [
    {
      "name": "Content-Type",
      "value": "application/json",
      "required": true,
      "description": "요청 본문 JSON"
    },
    {
      "name": "Authorization",
      "value": "Bearer {token}",
      "required": true,
      "description": "JWT 액세스 토큰"
    }
  ],
  "parameters": [
    {
      "name": "stockCode",
      "type": "string",
      "required": true,
      "description": "증권사 코드"
    },
    {
      "name": "stockId",
      "type": "string",
      "required": true,
      "description": "증권사 로그인 아이디"
    },
    {
      "name": "stockPassword",
      "type": "string",
      "required": true,
      "description": "증권사 로그인 비밀번호"
    },
    {
      "name": "account",
      "type": "string",
      "required": true,
      "description": "계좌번호"
    },
    {
      "name": "accountPassword",
      "type": "string",
      "required": false,
      "description": "계좌비밀번호(증권사에 따라 필요할 수 있음; Codef API 문서에 명시된 증권사 확인)"
    }
  ],
  "requestExample": {
    "stockCode": "0243",
    "stockId": "myStockId123",
    "stockPassword": "myStockPassword!",
    "account": "12345678901",
    "accountPassword": "1234"
  },
  "responses": [
    {
      "status": "200 OK",
      "description": "증권계좌 연동 성공"
    },
    {
      "status": "401 Unauthorized",
      "description": "인증 실패 (토큰 없음/만료)"
    },
    {
      "status": "500 Internal Server Error",
      "description": "증권계좌 연동 중 오류 발생"
    }
  ],
  "responseExample": {
    "data": {
      "connectedId": "abcd1234efgh5678",
      "savedCount": 3,
      "stocks": [
        {
          "id": 1,
          "memberId": 1,
          "connectedId": "abcd1234efgh5678",
          "organization": "0243",
          "resAccount": "12345678901",
          "resItemName": "삼성전자",
          "resItemCode": "005930",
          "resQuantity": "10",
          "resPresentAmt": "75000",
          "resPurchaseAmount": "700000",
          "resValuationAmt": "750000",
          "resValuationPL": "50000",
          "resEarningsRate": "7.14",
          "resProductType": "주식",
          "resAccountCurrency": "KRW"
        }
      ]
    },
    "success": true,
    "message": "증권계좌 연동이 완료되었습니다."
  },
  "curlExample": "curl -X POST https://api.banklab.app/api/stock/link \n  -H \"Content-Type: application/json\" \n  -H \"Authorization: Bearer {token}\" \n  -d '{\"stockCode\":\"0003\",\"stockId\":\"myStockId123\",\"stockPassword\":\"myStockPassword!\",\"account\":\"12345678901\",\"accountPassword\":\"1234\"}'"
}
